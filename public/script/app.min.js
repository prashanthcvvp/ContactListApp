var app=angular.module("ContactApp",["ngRoute"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/login.html",controller:"loginController as login"}).when("/contacts",{templateUrl:"partials/contacts.html",controller:"contactsController as contactsCtrl"}).when("/register",{templateUrl:"partials/register.html",controller:"registerController as register"}).otherwise({redirectTo:"/"})}]),app.controller("loginController",["$http","$log","$scope","$location","ContactsList","$rootScope",function(a,b,c,d,e,f){var g=this;g.invalid=!1,c.setTemp(!1),g.validate=function(){a.post("/login",c.login).success(function(a){void 0!==a.email&&c.login.email===a.email?(e.collection=a.collection,e.refresh(),d.path("/contacts")):(c.login.password="",g.invalid=!0)}).error(function(){b.error("Error!!")})}}]),app.service("ContactsList",["$http","$log","filterFilter",function(a,b,c){var d=[],e=this;e.collection,e.refresh=function(){a.get("/contacts/"+e.collection).success(function(a){d=a}).error(function(){b.info("Error")})},e.addContact=function(c){a.post("/contacts/"+e.collection,c).success(function(a){d.push(a)}).error(function(){b.error("Error!!")})},e.getContacts=function(a){var e=c(d,a);return b.info("Array = "+e),e},e.removeContact=function(c){a["delete"]("/contacts/"+c).success(function(a){refresh()}).error(function(){b.error("Error!!!")})},e.updateContact=function(c){a.put("/contacts/"+c._id,c).success(function(a){refresh()}).error(function(){b.error("Error !!")})}}]),app.controller("contactsController",["ContactsList","$scope","$log","$http","$window",function(a,b,c,d,e){var f=this;f.contact,b.setTemp(!0),c.info(),f.addContact=function(c){a.addContact(c),b.contact=""},f.getContacts=function(b){return a.getContacts(b)},f.removeContact=function(b){a.removeContact(b)},f.editContact=function(c){contacts=a.getContacts(),b.contact=contacts[c]},f.updateContact=function(){a.updateContact(b.contact),b.contact=""}}]),app.controller("registerController",["$http","$scope","$log",function(a,b,c){var d=this;d.addUser=function(){a.post("/register",b.credential).success(function(a){console.log(a)}).error(function(){c.error("Error!!")}),b.credential=""}}]),app.controller("appController",["$scope",function(a){a.temp=!1,a.setTemp=function(b){a.temp=b}}]);