var app=angular.module("ContactApp",["ngRoute","ngResource"]);app.factory("serverConnect",["$resource",function(a){return a("/contacts/:collection")}]),app.config(["$routeProvider","$resourceProvider",function(a,b){b.defaults.stripTrailingSlashes=!1,a.when("/",{templateUrl:"partials/login.html",controller:"loginController as login"}).when("/contacts",{templateUrl:"partials/contacts.html",controller:"contactsController as contactsCtrl"}).when("/register",{templateUrl:"partials/register.html",controller:"registerController as register"}).otherwise({redirectTo:"/"})}]),app.controller("loginController",["$http","$log","$scope","$location","ContactsList","$rootScope",function(a,b,c,d,e,f){var g=this;g.invalid=!1,c.setTemp(!1),g.validate=function(){a.post("/login",c.login).success(function(a){void 0!==a.email&&c.login.email===a.email?(e.collection=a.collection,e.refresh(),d.path("/contacts")):(c.login.password="",g.invalid=!0)}).error(function(){b.error("Error!!")})}}]),app.service("ContactsList",["$http","$log","filterFilter","serverConnect","$location",function(a,b,c,d,e){var f=[],g=this;g.collection="",g.refresh=function(){""!==g.collection?d.query({collection:g.collection},function(a){f=a}):e.path("/")},g.addContact=function(c){a.post("/contacts/"+g.collection,c).success(function(a){f.push(a)}).error(function(){b.error("Error!!")})},g.getContacts=function(a){var b=c(f,a);return b},g.removeContact=function(c){a["delete"]("/contacts/"+c).success(function(a){refresh()}).error(function(){b.error("Error!!!")})},g.updateContact=function(c){a.put("/contacts/"+c._id,c).success(function(a){refresh()}).error(function(){b.error("Error !!")})}}]),app.controller("contactsController",["ContactsList","$scope","$log","$http","$window",function(a,b,c,d,e){var f=this;f.contact,b.setTemp(!0),a.refresh(),f.addContact=function(c){a.addContact(c),b.contact=""},f.getContacts=function(b){return a.getContacts(b)},f.removeContact=function(b){a.removeContact(b)},f.editContact=function(c){contacts=a.getContacts(),b.contact=contacts[c]},f.updateContact=function(){a.updateContact(b.contact),b.contact=""}}]),app.controller("registerController",["$http","$scope","$log",function(a,b,c){var d=this;d.addUser=function(){a.post("/register",b.credential).success(function(a){console.log(a)}).error(function(){c.error("Error!!")}),b.credential=""}}]),app.controller("appController",["$scope",function(a){a.temp=!1,a.setTemp=function(b){a.temp=b}}]);